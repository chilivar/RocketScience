{% extends 'accounts/Shablon.html' %}
{% load static %}
{% block css %}
<title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏</title>
<link rel="stylesheet" href="{% static 'articles/css/article.css' %}">
{% endblock %}
{% block content %}
<div class="article-detail">
    <h1>{{ article.title }}</h1>
    <p class="article-author"><strong>–ê–≤—Ç–æ—Ä:</strong> {{ article.author.username }}</p>
    <p>{{ article.content }}</p>
    <p><strong>–°–æ–∑–¥–∞–Ω–æ:</strong> {{ article.created_at }}</p>
    <p><strong>–û–±–Ω–æ–≤–ª–µ–Ω–æ:</strong> {{ article.updated_at }}</p>
    <div class="action-buttons">
        <a href="{% url 'articles:article_list' %}" class="back-button">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
        {% if request.user == article.author %}
            <a href="{% url 'articles:edit_article' article.pk %}" class="edit-button">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <a href="{% url 'articles:delete_article' article.pk %}" class="delete-button">–£–¥–∞–ª–∏—Ç—å</a>
        {% endif %}
    </div>
</div>
<div class="like-section">
    <form method="post" action="{% url 'articles:toggle_like' article.id %}">
        {% csrf_token %}
        <button type="submit" class="like-button">
            {% if is_liked %}
                üíî –£–±—Ä–∞—Ç—å –ª–∞–π–∫
            {% else %}
                ‚ù§Ô∏è –õ–∞–π–∫
            {% endif %}
        </button>
    </form>
    <p>–õ–∞–π–∫–æ–≤: {{ article.likes.count }}</p>
</div>
<div class="report-section">
    <h3>–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ç—å—é</h3>
    {% if request.user.is_authenticated %}
        <form method="post" class="report-form">
            {% csrf_token %}
            {{ report_form.as_p }}
            <button type="submit" name="report_submit" class="report-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É</button>
        </form>
    {% else %}
        <p>–í—ã –¥–æ–ª–∂–Ω—ã <a href="{% url 'login' %}">–≤–æ–π—Ç–∏</a>, —á—Ç–æ–±—ã –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ç—å—é.</p>
    {% endif %}
</div>
<div class="comments-container">
    <h2>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>

    {% if comments %}
        <ul class="comments-list">
            {% for comment in comments %}
                <li class="comment-item">
                    <p class="comment-author"><strong>{{ comment.author.username }}</strong>:</p>
                    <p class="comment-content">{{ comment.content }}</p>
                    <p class="comment-date">{{ comment.created_at|date:"d.m.Y H:i" }}</p>
                    {% if request.user == comment.author %}
                <form method="post" action="{% url 'articles:delete_comment' comment.pk %}" class="delete-comment-form">
                    {% csrf_token %}
                    <button type="submit" class="delete-comment-button">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
            {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
    {% endif %}

    {% if request.user.is_authenticated %}
        <h3>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h3>
        <form method="post" class="comment-form">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="submit-comment-button">–î–æ–±–∞–≤–∏—Ç—å</button>
        </form>
    {% else %}
        <p>–í—ã –¥–æ–ª–∂–Ω—ã <a href="{% url 'login' %}">–≤–æ–π—Ç–∏</a>, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.</p>
    {% endif %}
</div>
{% endblock %}






