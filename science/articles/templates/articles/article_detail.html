{% extends 'accounts/Shablon.html' %}
{% load static %}
{% block css %}
<title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏</title>
<link rel="stylesheet" href="{% static 'articles/css/article.css' %}">
{% endblock %}
{% block content %}
<div class="article-detail">
    <h1>{{ article.title }}</h1>
    <p class="article-author"><strong>–ê–≤—Ç–æ—Ä:</strong> {{ article.author.username }}</p>
    <p>{{ article.content }}</p>
    <p><strong>–°–æ–∑–¥–∞–Ω–æ:</strong> {{ article.created_at }}</p>
    <p><strong>–û–±–Ω–æ–≤–ª–µ–Ω–æ:</strong> {{ article.updated_at }}</p>
    <div class="action-buttons">
        <a href="{% url 'articles:article_list' %}" class="back-button">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
        {% if request.user == article.author %}
            <a href="{% url 'articles:edit_article' article.pk %}" class="edit-button">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <a href="{% url 'articles:delete_article' article.pk %}" class="delete-button">–£–¥–∞–ª–∏—Ç—å</a>
        {% endif %}
    </div>
    <div class="like-section">
    <form method="post" action="{% url 'articles:toggle_like' article.id %}">
        {% csrf_token %}
        <button type="submit" class="like-button">
            {% if is_liked %}
                üíî –£–±—Ä–∞—Ç—å –ª–∞–π–∫
            {% else %}
                ‚ù§Ô∏è –õ–∞–π–∫
            {% endif %}
        </button>
    </form>
    <p>–õ–∞–π–∫–æ–≤: {{ article.likes.count }}</p>
</div>
<!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∂–∞–ª–æ–±—ã -->
<button class="report-button" onclick="openModal()">–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è</button>
    <div class="comments-container">
    <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
    {% if comments %}
        <ul>
            {% for comment in comments %}
                <li>
                    <p><strong>{{ comment.author.username }}</strong>: {{ comment.content }}</p>
                    <p class="comment-date">{{ comment.created_at|date:"d.m.Y H:i" }}</p>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –û—Å—Ç–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π!</p>
    {% endif %}

    {% if request.user.is_authenticated %}
        <h4>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h4>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" name="comment_submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </form>
    {% else %}
        <p>–í—ã –¥–æ–ª–∂–Ω—ã <a href="{% url 'login' %}">–≤–æ–π—Ç–∏</a>, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.</p>
    {% endif %}
</div>

</div>

<script>
    // –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    function openModal() {
        document.getElementById('reportModal').style.display = 'block';
    }

    // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    function closeModal() {
        document.getElementById('reportModal').style.display = 'none';
    }

    // –ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏
    window.onclick = function(event) {
        const modal = document.getElementById('reportModal');
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    }
</script>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div id="reportModal" class="modal">
    <div class="modal-content">
        <span class="close-button" onclick="closeModal()">&times;</span>
        <h2>–ñ–∞–ª–æ–±–∞ –Ω–∞ —Å—Ç–∞—Ç—å—é</h2>
        <form method="post">
            {% csrf_token %}
            {{ report_form.as_p }}
            <button type="submit" name="report_submit" class="submit-report-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É</button>
        </form>
    </div>
</div>

{% endblock %}






